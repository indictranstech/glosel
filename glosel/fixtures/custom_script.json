[
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Employee", 
  "modified": "2016-07-06 11:59:49.690055", 
  "name": "Employee-Client", 
  "script": "cur_frm.add_fetch('employment_type','code','code')", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Delivery Note", 
  "modified": "2016-10-17 18:20:03.813065", 
  "name": "Delivery Note-Client", 
  "script": "cur_frm.add_fetch(\"company\",\"code\",\"cc\")\nfrappe.ui.form.on(\"Delivery Note\", {\n  get_schemes: function(frm) {\n      frappe.msgprint(\"<b>Schemes Available are updated</b>\")\n     frappe.call({\n      method: \"glosel.scheme_management.get_schemes\",\n      args: {\"doc\": frm.doc},\n      callback: function(r, rt){\n            console.log(r.message,\"jiiiiiiii\");\n            cur_frm.doc.schemes_available=[]\n            refresh_field(\"schemes_available\")\n            $.each(r.message,function(i,d){\n                var row = frappe.model.add_child(cur_frm.doc, \"Schemes Available\", \"schemes_available\");\n                row.apply_on = d.apply_on;\n                row.scheme_name = d.name;\n                row.valid_from = d.valid_from;\n                row.valid_upto = d.valid_upto;\n                row.scheme_type = d.scheme_type\n            })\n            frm.save()\n            frm.refresh()\n        }\n      });\n  },\n});\n\nfrappe.ui.form.on(\"Schemes Available\", \"apply\", function(frm,cdt,cdn) {\n  var d=locals[cdt][cdn]\n  frappe.call({\n                 method: \"frappe.client.get_list\",\n                 args: {\n                     doctype: \"Scheme Management Item\",\n                     fields: [\"apply_on\", \"item_code\"],\n                     filters: { 'parent': d.scheme_name },\n                 },\n                    callback: function(res){\n                       if (res && res.message){\n                        if(d.scheme_type==\"Fix\"){\n                            $.each(res.message,function(i,k){\n                            var row = frappe.model.add_child(cur_frm.doc, \"Schemes Selected\", \"schemes_selected\");\n                            row.scheme_name = d.scheme_name;\n                            row.apply_on = d.apply_on;\n                            row.scheme_type = d.scheme_type;\n                            row.item_code=k.item_code;     \n                            })   \n                            frappe.msgprint(\"Free items added\")                     \n                        }\n                        else if(d.scheme_type==\"Selective\" && d.apply_on==\"Item Code\"){\n                          var row = frappe.model.add_child(cur_frm.doc, \"Schemes Selected\", \"schemes_selected\");\n                            if(d.selected_item){\n                              row.scheme_name = d.scheme_name;\n                              row.apply_on = d.apply_on;\n                              row.scheme_type = d.scheme_type;\n                              row.item_code=d.selected_item;\n                              \n                          }\n\n                          else\n                          { frappe.msgprint(\"Please select Item\")}\n                        }\n                        else if(d.scheme_type==\"Selective\" && (d.apply_on==\"Item Group\" || d.apply_on==\"Brand\")){\n                           // frappe.msgprint(\"coding..\");\n                           // frappe.msgprint(d.selected_item);\n                           free_item_to_add = d.selected_item\n                           free_item_to_add = free_item_to_add.split(\",\")\n                              for(i=0;i<free_item_to_add.length-1;i++){\n                                  var row = frappe.model.add_child(cur_frm.doc, \"Schemes Selected\", \"schemes_selected\");\n                                    if(d.selected_item){\n                                      row.scheme_name = d.scheme_name;\n                                      row.apply_on = d.apply_on;\n                                      row.scheme_type = d.scheme_type;\n                                      row.item_code=free_item_to_add[i];                                        \n                                    }\n                                    else\n                                    { \n                                      frappe.msgprint(\"Please select Item\");\n                                    }\n\n                              }\n                        }\n                      }\n                    }     \n             }); \n\n});\nfrappe.ui.form.on(\"Schemes Available\", \"view_details\", function(frm,cdt,cdn) {\n  var d=locals[cdt][cdn]\n\n  if(d.apply_on==\"Brand\"){\n    frappe.call({\n      method: \"glosel.scheme_management.get_free_item_by_brand\",\n      args: {\"doc\": frm.doc, \"apply_on\":\"Brand\", \"scheme_name\":d.scheme_name},\n      callback: function(r, rt){\n            console.log(r.message,\"jiiiiiiii\");\n            var len_custom = r.message.length;\n            free_price = r.message[len_custom-1][\"total_price\"]\n            if(free_price){              \n              msgprint(\"Free Item of worth Rs: \" + free_price)\n            }\n            var free_item = r.message;\n            abc=frappe.render_template(\"render_free_item\", {\"free_item\":free_item, \"scheme_type\": d.scheme_type, \"apply_on\": \"Brand\"});\n            frappe.msgprint(abc);\n            $(\".msgprint\").css(\"max-height\",\"250px\");\n            $(\".msgprint\").css(\"overflow\",\"auto\");\n            $(\"#add-selected-item\").click(function(){\n              selected_item=$(\"input[type='radio'][name='_select']:checked\").val();\n              console.log(selected_item)\n              console.log(\"sff\")\n              frappe.model.set_value(cdt, cdn, \"selected_item\", selected_item);\n              if(d.apply_on==\"Brand\"&&d.scheme_type==\"Selective\"){\n                  var selected_item = [];\n                  $(\"input:checkbox:checked\").each ( function() {\n                    selected_item.push($(this).attr(\"name\"));\n                  });\n                  sel_item = \"\"\n                  for(i=1;i<selected_item.length;i++){\n                    // msgprint(selected_item[i])\n                    if(selected_item[i]){\n                      sel_item = sel_item + selected_item[i]+\",\" \n                    }\n                  }\n                  console.log(\"sel_item\",sel_item)\n                  frappe.model.set_value(cdt, cdn, \"selected_item\", sel_item);\n              }\n                  $(\".btn-modal-close\").click()\n            })  \n\n        }\n    });\n  }\n  else if(d.apply_on==\"Item Code\" || d.apply_on==\"Item Group\"){\n    frappe.call({\n      method: \"glosel.scheme_management.get_free_item_by_brand\",\n      args: {\"doc\": frm.doc, \"apply_on\":d.apply_on, \"scheme_name\":d.scheme_name},\n      callback: function(r, rt){\n            console.log(r.message,\"jiiiiiiii\");\n            var len_custom = r.message.length;\n            // console.log(len_custom,\"lenght\");\n            // console.log(,\"jiiiiiiii\");\n            free_price = r.message[len_custom-1][\"total_price\"]\n            if(free_price){              \n              msgprint(\"Free Item of worth Rs: \" + free_price)\n            }\n            var free_item = r.message;\n            abc=frappe.render_template(\"render_free_item\", {\"free_item\":free_item, \"scheme_type\": d.scheme_type, \"apply_on\": d.apply_on});\n            frappe.msgprint(abc);\n            $(\".msgprint\").css(\"max-height\",\"250px\");\n            $(\".msgprint\").css(\"overflow\",\"auto\");\n            $(\"#add-selected-item\").click(function(){\n              selected_item=$(\"input[type='radio'][name='_select']:checked\").val();\n              frappe.model.set_value(cdt, cdn, \"selected_item\", selected_item);\n              if(d.apply_on==\"Item Group\"&&d.scheme_type==\"Selective\"){\n                  var selected_item = [];\n                  $(\"input:checkbox:checked\").each ( function() {\n                    selected_item.push($(this).attr(\"name\"));\n                  });\n                  sel_item = \"\"\n                  for(i=1;i<selected_item.length;i++){\n                    if(selected_item[i]){\n                      sel_item = sel_item + selected_item[i]+\",\" \n                    }                  }\n                  frappe.model.set_value(cdt, cdn, \"selected_item\", sel_item);\n              }\n                  $(\".btn-modal-close\").click()\n            })  \n\n        }\n    });\n  }\n});", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Purchase Order", 
  "modified": "2016-10-07 11:24:23.927075", 
  "name": "Purchase Order-Client", 
  "script": "frappe.ui.form.on(\"Purchase Order\", {\n  get_claim_details: function(frm) {\n     frappe.call({\n      method: \"glosel.scheme_management.get_claim_details\",\n      args: {\"doc\": frm.doc},\n      callback: function(r, rt){\n            console.log(r.message,\"jiiiiiiii\");\n            cur_frm.doc.claim_available=[]\n            refresh_field(\"claim_available\")\n            $.each(r.message,function(i,d){\n                var row = frappe.model.add_child(cur_frm.doc, \"Claim Available\", \"claim_available\");\n                row.item_code = d.item_code;  \n                row.delivery_note = d.delivery_note\n                row.delivery_note_item = d.dni  \n                row.customer = d.customer\n                row.qty = d.qty\n                row.scheme_name = d.scheme_name            \n                row.apply_on = d.apply_on;\n                row.scheme_type = d.scheme_type\n                row.claim_for_qty = d.claim_for_qty\n                // row.scheme_name = d.name;\n                // row.valid_from = d.valid_from;\n                // row.valid_upto = d.valid_upto;\n            })\n            frm.save();\n            frm.refresh();\n        }\n      });\n      cur_frm.set_value(\"is_claim\",1)\n      frappe.msgprint(\"<b>Claim Available are updated</b>\")\n  },\n});\ncur_frm.add_fetch(\"company\",\"code\",\"cc\");\nfrappe.ui.form.on(\"Claim Available\", \"change_item\", function(frm,cdt,cdn) {\n    var d=locals[cdt][cdn]\n    // frappe.msgprint(\"In change_item\");\n    // frappe.msgprint(d.scheme_name)\n    frappe.call({\n      method: \"glosel.scheme_management.change_item_in_po\",\n      args: {\"doc\": frm.doc, \"scheme_name\":d.scheme_name},\n      callback: function(r, rt){\n            console.log(r.message,\"jiiiiiiii\");\n            var len_custom = r.message.length;\n            // free_price = r.message[len_custom-1][\"total_price\"]\n            // if(free_price){              \n            //   msgprint(\"Free Item of worth Rs: \" + free_price)\n            // }\n\n\n\n            var free_item = r.message;\n            abc=frappe.render_template(\"render_free_item\", {\"free_item\":free_item, \"scheme_type\": \"Selective\", \"apply_on\": \"Item Code\"});\n            frappe.msgprint(abc);\n            \n            $(\".msgprint\").css(\"max-height\",\"250px\");\n            $(\".msgprint\").css(\"overflow\",\"auto\");\n            $(\"#add-selected-item\").click(function(){\n              selected_item=$(\"input[type='radio'][name='_select']:checked\").val();\n              console.log(selected_item)\n              console.log(\"sff\")\n              frappe.model.set_value(cdt, cdn, \"selected_item\", selected_item);\n              if(d.apply_on==\"Brand\"&&d.scheme_type==\"Selective\"){\n                  var selected_item = [];\n                  $(\"input:checkbox:checked\").each ( function() {\n                    selected_item.push($(this).attr(\"name\"));\n                  });\n                  sel_item = \"\"\n                  for(i=1;i<selected_item.length;i++){\n                    msgprint(selected_item[i])\n                    sel_item = sel_item + selected_item[i]+\",\" \n                  }\n                  console.log(\"sel_item\",sel_item)\n                  frappe.model.set_value(cdt, cdn, \"selected_item\", sel_item);\n              }\n                  $(\".btn-modal-close\").click()\n            }) \n\n            }\n\n    });\n});\n\nfrappe.ui.form.on(\"Purchase Order Item\",\"item_code\" ,function(frm,cdt,cdn){\n  if (cur_frm.doc.supplier==\"\")\n  {\n  frappe.throw(__(\"Please Enter Supplier Name\"))  \n  }\n  items=locals[cdt][cdn]\n  return frappe.call({\n      method: \"glosel.api.fetch_supplier_uom\",\n      args: {\n        supplier: frm.doc.supplier,\n        item:items.item_code\n      },\n      callback: function(r) {\n        if(r.message){\n          // console.log(r.message)\n          // console.log(items.unit_of_measure)\n          // items.unit_of_measure=r.message\n           items.uom=r.message\n          // console.log(items.uom)\n          // cur_frm.refresh_fields()\n          //frappe.model.set_value(cdt, cdn, \"uom\", r.message);\n          console.log(\"before refresh\",items.uom)\n          cur_frm.refresh_field(\"items\")\n          console.log(\"after Refresh\",items.uom)\n\n        }\n      }\n    });\n})", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Salary Structure", 
  "modified": "2016-06-13 16:48:03.704616", 
  "name": "Salary Structure-Client", 
  "script": "cur_frm.add_fetch(\"employee\",\"esi_ip_number\",\"esi_ip_number\")\ncur_frm.add_fetch(\"employee\",\"epfo_pf_account_number\",\"epfo_pf_account_number\")", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Salary Slip", 
  "modified": "2016-06-07 19:01:08.087305", 
  "name": "Salary Slip-Client", 
  "script": "cur_frm.add_fetch(\"employee\", \"epfo_pf_account_number\", \"epfo_pf_account_number\");\n\ncur_frm.add_fetch(\"employee\", \"esi_ip_number\", \"esi_ip_number\");\n\ncur_frm.add_fetch(\"employee\", \"pan\", \"pan\");\n\ncur_frm.add_fetch(\"employee\", \"department\", \"department\");\n\ncur_frm.add_fetch(\"employee\", \"designation\", \"designation\");\n\ncur_frm.add_fetch(\"employee\", \"salary_mode\", \"salary_mode\");\ncur_frm.add_fetch(\"employee\", \"bank_ac_no\", \"bank_acount_no\");", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Item", 
  "modified": "2016-09-17 12:49:33.560959", 
  "name": "Item-Client", 
  "script": "frappe.ui.form.on(\"Item\",\"brand\" ,function(frm){\n \tconsole.log(\"ffff\",frm.doc.brand)\n \tfrappe.call({\n \t\tmethod:\"glosel.custom_py_methods.item_autoname\",\n \t\targs:{\n \t\t\t\"brand\":frm.doc.brand\n \t\t},\n \t\tcallback: function(r) {\n \t\t\t\tif(r.message){\n \t\t\t\t\t// console.log(r.message)\n \t\t\t\t\tfrm.doc.item_code=r.message\n \t\t\t\t\tconsole.log(items.uom)\n \t\t\t\t\t// cur_frm.refresh_fields()\n \t\t\t\t}\n \t\t\t}\n \t\t});\t})", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Process Payroll", 
  "modified": "2016-06-14 16:41:57.754889", 
  "name": "Process Payroll-Client", 
  "script": "", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Sales Order", 
  "modified": "2016-09-17 13:26:01.584738", 
  "name": "Sales Order-Client", 
  "script": "cur_frm.add_fetch(\"company\",\"code\",\"cc\")\nfrappe.ui.form.on(\"Sales Order\",\"is_pro_forma\" ,function(frm){\n\nif (cur_frm.doc.is_pro_forma==1){\n     cur_frm.set_value(\"naming_series\",\"PFI.cc./CS/1617/\")\n} else {\n\n    cur_frm.set_value(\"naming_series\",\"SO.cc./CS/1617/\")\n    cur_frm.refresh_fields()\n}\n})", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Sales Invoice", 
  "modified": "2016-09-17 15:04:31.670387", 
  "name": "Sales Invoice-Client", 
  "script": "cur_frm.add_fetch(\"company\",\"code\",\"cc\")\nfrappe.ui.form.on(\"Sales Invoice\",\"refresh\" ,function(frm){\n\nif (cur_frm.doc.is_return==1){\n     cur_frm.set_value(\"naming_series\",\"SRT.cc./CS/1617/\")\n} else {\n\n    cur_frm.set_value(\"naming_series\",\"SI.cc./CS/1617/\")\n    cur_frm.refresh_fields()\n}\n})", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Purchase Invoice", 
  "modified": "2016-09-16 19:31:08.788059", 
  "name": "Purchase Invoice-Client", 
  "script": "cur_frm.add_fetch(\"company\",\"code\",\"cc\")", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Purchase Receipt", 
  "modified": "2016-09-16 19:31:29.518454", 
  "name": "Purchase Receipt-Client", 
  "script": "cur_frm.add_fetch(\"company\",\"code\",\"cc\")", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Quotation", 
  "modified": "2016-09-16 19:31:51.190891", 
  "name": "Quotation-Client", 
  "script": "cur_frm.add_fetch(\"company\",\"code\",\"cc\")", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Journal Entry", 
  "modified": "2016-09-17 16:09:47.162169", 
  "name": "Journal Entry-Client", 
  "script": "cur_frm.add_fetch(\"company\",\"code\",\"cc\")\nfrappe.ui.form.on(\"Journal Entry\",\"refresh\" ,function(frm){\n\nif (cur_frm.doc.voucher_type==\"Journal Entry\"){\n     cur_frm.set_value(\"naming_series\",\"JV.cc./1617/\")\n} \nelse if   (cur_frm.doc.voucher_type==\"Cash Entry\"){\n\n    cur_frm.set_value(\"naming_series\",\"CPV.cc./1617/\")\n    cur_frm.refresh_fields()\n}\nelse if   (cur_frm.doc.voucher_type==\"Debit Note\"){\n\n    cur_frm.set_value(\"naming_series\",\"DBN.cc./1617/\")\n    cur_frm.refresh_fields()\n}\nelse if   (cur_frm.doc.voucher_type==\"Credit Note\"){\n\n    cur_frm.set_value(\"naming_series\",\"CRN.cc./1617/\")\n    cur_frm.refresh_fields()\n}\n})\nfrappe.ui.form.on(\"Journal Entry\",\"voucher_type\" ,function(frm){\n\nif (cur_frm.doc.voucher_type==\"Journal Entry\"){\n     cur_frm.set_value(\"naming_series\",\"JV.cc./1617/\")\n} \nelse if   (cur_frm.doc.voucher_type==\"Cash Entry\"){\n\n    cur_frm.set_value(\"naming_series\",\"CPV.cc./1617/\")\n    cur_frm.refresh_fields()\n}\nelse if   (cur_frm.doc.voucher_type==\"Debit Note\"){\n\n    cur_frm.set_value(\"naming_series\",\"DBN.cc./1617/\")\n    cur_frm.refresh_fields()\n}\nelse if   (cur_frm.doc.voucher_type==\"Credit Note\"){\n\n    cur_frm.set_value(\"naming_series\",\"CRN.cc./1617/\")\n    cur_frm.refresh_fields()\n}\n})", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Stock Entry", 
  "modified": "2016-09-17 16:10:53.739497", 
  "name": "Stock Entry-Client", 
  "script": "cur_frm.add_fetch(\"company\",\"code\",\"cc\")", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Material Request", 
  "modified": "2016-09-17 16:11:12.236025", 
  "name": "Material Request-Client", 
  "script": "cur_frm.add_fetch(\"company\",\"code\",\"cc\")", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Customer", 
  "modified": "2016-09-29 17:54:44.356240", 
  "name": "Customer-Client", 
  "script": "// $(cur_dialog.fields_dict.name_field).keydown(function(e) {\n//     var cust=$(cur_dialog.fields_dict.name_field)\n\n//    if(e.keyCode == 32 ||e.keyCode == 9 ||e.keyCode == 13 ){\n// field=  $(cur_dialog.fields_dict.name_field).find(\"input[data-fieldname='name_field']\")\n//       data=  $(cur_dialog.fields_dict.name_field).find(\"input[data-fieldname='name_field']\").val();\n// arr=data.trim().split(\" \")\n// newarr=[]\n// for (var i = 0; i < arr.length; i++) {\n//     ele=arr[i].replace(arr[i][0],arr[i][0].toUpperCase())\n//     newarr.push(ele)\n// };\n// full_name=newarr.join(\" \")\n// field.val(full_name)\n// console.log(newarr.join(\" \"))\n\n//     }\n// })\n\n// $(cur_dialog.fields_dict.name_field).focusout(function(e) {\n//     var cust=$(cur_dialog.fields_dict.name_field)\n\n  \n// field=  $(cur_dialog.fields_dict.name_field).find(\"input[data-fieldname='name_field']\")\n//       data=  $(cur_dialog.fields_dict.name_field).find(\"input[data-fieldname='name_field']\").val();\n// arr=data.trim().split(\" \")\n// newarr=[]\n// for (var i = 0; i < arr.length; i++) {\n//     ele=arr[i].replace(arr[i][0],arr[i][0].toUpperCase())\n//     newarr.push(ele)\n// };\n// full_name=newarr.join(\" \")\n// field.val(full_name)\n// console.log(newarr.join(\" \"))\n\n    \n// })\n\n", 
  "script_type": "Client"
 }
]